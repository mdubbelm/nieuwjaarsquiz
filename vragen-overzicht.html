<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vragen Overzicht</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #1a1a2e; color: white; padding: 20px; line-height: 1.6; }
        h1 { margin-bottom: 20px; color: #FFD700; }
        .quiz-section { margin-bottom: 40px; }
        .quiz-title { font-size: 1.5rem; color: #FF6B35; margin-bottom: 15px; border-bottom: 2px solid #FF6B35; padding-bottom: 10px; }
        .question { background: rgba(255,255,255,0.05); border-radius: 10px; padding: 15px; margin-bottom: 15px; }
        .question-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .question-number { font-weight: bold; color: #00D4FF; }
        .category { background: rgba(139, 92, 246, 0.3); padding: 3px 10px; border-radius: 20px; font-size: 0.8rem; }
        .question-text { font-size: 1.1rem; margin-bottom: 10px; }
        .answers { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .answer { padding: 8px 12px; border-radius: 8px; font-size: 0.9rem; }
        .answer.correct { background: rgba(16, 185, 129, 0.3); border: 2px solid #10B981; }
        .answer.wrong { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); }
        .music-badge { display: inline-block; background: linear-gradient(135deg, #FF1493, #8B5CF6); padding: 2px 8px; border-radius: 10px; font-size: 0.7rem; margin-left: 10px; }
        .result-audio { margin-top: 8px; font-size: 0.85rem; color: #FFD700; font-style: italic; }
        .stats { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 30px; }
        .stats span { margin-right: 20px; }
        .filter-bar { margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; }
        .filter-btn { background: rgba(255,255,255,0.1); border: none; color: white; padding: 8px 15px; border-radius: 20px; cursor: pointer; }
        .filter-btn.active { background: #8B5CF6; }
        a { color: #00D4FF; }
    </style>
</head>
<body>
    <h1>Vragen Overzicht</h1>
    <p style="margin-bottom: 20px;"><a href="index.html">Terug naar Quiz</a></p>

    <div class="stats" id="stats"></div>
    <div class="filter-bar" id="filter-bar"></div>
    <div id="content"></div>

    <script>
        const quizFiles = [
            { id: 'nieuwjaarsquiz-2025', file: 'quizzes/nieuwjaarsquiz-2025.json' },
            { id: 'popquiz-classics', file: 'quizzes/popquiz-classics.json' }
        ];

        let allQuestions = [];
        let activeFilter = 'all';

        async function loadQuizzes() {
            const content = document.getElementById('content');
            const stats = document.getElementById('stats');
            const filterBar = document.getElementById('filter-bar');

            let totalQuestions = 0;
            let categories = new Set();
            let html = '';

            for (const quiz of quizFiles) {
                try {
                    const response = await fetch(quiz.file);
                    const data = await response.json();

                    html += `<div class="quiz-section" data-quiz="${quiz.id}">`;
                    html += `<h2 class="quiz-title">${data.title} (${data.questions.length} vragen)</h2>`;

                    data.questions.forEach((q, i) => {
                        const cat = q.category || 'algemeen';
                        categories.add(cat);
                        totalQuestions++;

                        html += `<div class="question" data-category="${cat}">`;
                        html += `<div class="question-header">`;
                        html += `<span class="question-number">#${i + 1}</span>`;
                        html += `<span class="category">${cat}</span>`;
                        html += `</div>`;
                        html += `<div class="question-text">${q.question}`;
                        if (q.type === 'music') html += `<span class="music-badge">Muziekvraag</span>`;
                        html += `</div>`;
                        html += `<div class="answers">`;
                        q.answers.forEach((a, j) => {
                            const isCorrect = j === q.correct;
                            html += `<div class="answer ${isCorrect ? 'correct' : 'wrong'}">${isCorrect ? '✓ ' : ''}${a}</div>`;
                        });
                        html += `</div>`;
                        if (q.resultAudio) {
                            html += `<div class="result-audio">♪ ${q.resultText || q.resultAudio}</div>`;
                        }
                        html += `</div>`;
                    });

                    html += `</div>`;
                } catch (e) {
                    html += `<p>Kon ${quiz.file} niet laden: ${e.message}</p>`;
                }
            }

            content.innerHTML = html;
            stats.innerHTML = `<span><strong>Totaal:</strong> ${totalQuestions} vragen</span><span><strong>Categorieën:</strong> ${categories.size}</span>`;

            // Build filter buttons
            let filterHtml = `<button class="filter-btn active" onclick="filterCategory('all')">Alle</button>`;
            [...categories].sort().forEach(cat => {
                filterHtml += `<button class="filter-btn" onclick="filterCategory('${cat}')">${cat}</button>`;
            });
            filterBar.innerHTML = filterHtml;
        }

        function filterCategory(cat) {
            activeFilter = cat;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.toggle('active', btn.textContent.toLowerCase() === cat || (cat === 'all' && btn.textContent === 'Alle'));
            });
            document.querySelectorAll('.question').forEach(q => {
                if (cat === 'all' || q.dataset.category === cat) {
                    q.style.display = 'block';
                } else {
                    q.style.display = 'none';
                }
            });
        }

        loadQuizzes();
    </script>
</body>
</html>
